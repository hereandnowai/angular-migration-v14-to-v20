<div class="max-w-4xl mx-auto">
  <div class="bg-white p-8 rounded-2xl shadow-lg">
    <div class="mb-8 text-center">
      <h1 class="text-3xl font-bold text-gray-800">Reactive Form Showcase</h1>
      <p class="text-gray-500 mt-2">Built with Angular 20 and styled with Tailwind CSS</p>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Name -->
        <div>
          <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
          <input id="name" type="text" formControlName="name" placeholder="John Doe"
                 class="w-full px-4 py-2 border rounded-lg focus:ring-primary-500 focus:border-primary-500 transition"
                 [class.border-red-500]="name.invalid && name.touched"
                 [class.border-gray-300]="!name.invalid || name.pristine">
          @if (name.invalid && name.touched) {
            <p class="text-red-500 text-xs mt-1">Name is required and must be at least 2 characters.</p>
          }
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
          <input id="email" type="email" formControlName="email" placeholder="john.doe@example.com"
                 class="w-full px-4 py-2 border rounded-lg focus:ring-primary-500 focus:border-primary-500 transition"
                 [class.border-red-500]="email.invalid && email.touched"
                 [class.border-gray-300]="!email.invalid || email.pristine">
          @if (email.invalid && email.touched) {
            <p class="text-red-500 text-xs mt-1">Please enter a valid email address.</p>
          }
        </div>

        <!-- Age -->
        <div>
          <label for="age" class="block text-sm font-medium text-gray-700 mb-1">Age</label>
          <input id="age" type="number" formControlName="age" placeholder="25"
                 class="w-full px-4 py-2 border rounded-lg focus:ring-primary-500 focus:border-primary-500 transition"
                 [class.border-red-500]="age.invalid && age.touched"
                 [class.border-gray-300]="!age.invalid || age.pristine">
          @if (age.invalid && age.touched) {
            <p class="text-red-500 text-xs mt-1">Age must be between 18 and 100.</p>
          }
        </div>
        
        <!-- Country -->
        <div>
          <label for="country" class="block text-sm font-medium text-gray-700 mb-1">Country</label>
          <select id="country" formControlName="country"
                  class="w-full px-4 py-2 border rounded-lg focus:ring-primary-500 focus:border-primary-500 transition bg-white"
                  [class.border-red-500]="country.invalid && country.touched"
                  [class.border-gray-300]="!country.invalid || country.pristine">
            @for (country of countries; track country) {
              <option [value]="country">{{ country }}</option>
            }
          </select>
        </div>
      </div>
      
      <!-- Bio -->
      <div class="mt-6">
        <label for="bio" class="block text-sm font-medium text-gray-700 mb-1">Bio</label>
        <textarea id="bio" formControlName="bio" rows="4" placeholder="Tell us something about yourself..."
                  class="w-full px-4 py-2 border rounded-lg focus:ring-primary-500 focus:border-primary-500 transition"
                  [class.border-red-500]="bio.invalid"
                  [class.border-gray-300]="!bio.invalid"></textarea>
          <p class="text-gray-500 text-xs text-right">{{ form.value.bio?.length || 0 }} / 200</p>
      </div>

      <!-- Skills -->
      <div class="mt-6" formGroupName="skills">
        <label class="block text-sm font-medium text-gray-700 mb-2">Skills</label>
        <div class="flex flex-wrap gap-4">
          <label class="flex items-center space-x-2 cursor-pointer">
            <input type="checkbox" formControlName="angular" class="h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500">
            <span>Angular</span>
          </label>
          <label class="flex items-center space-x-2 cursor-pointer">
            <input type="checkbox" formControlName="react" class="h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500">
            <span>React</span>
          </label>
          <label class="flex items-center space-x-2 cursor-pointer">
            <input type="checkbox" formControlName="vue" class="h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500">
            <span>Vue</span>
          </label>
        </div>
      </div>
      
      <!-- Gender -->
      <div class="mt-6">
        <label class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
        <div class="flex flex-wrap gap-4">
          <label class="flex items-center space-x-2 cursor-pointer">
            <input type="radio" formControlName="gender" value="male" class="h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-500">
            <span>Male</span>
          </label>
          <label class="flex items-center space-x-2 cursor-pointer">
            <input type="radio" formControlName="gender" value="female" class="h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-500">
            <span>Female</span>
          </label>
           <label class="flex items-center space-x-2 cursor-pointer">
            <input type="radio" formControlName="gender" value="other" class="h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-500">
            <span>Other</span>
          </label>
        </div>
      </div>

      <!-- Subscribe -->
      <div class="mt-6">
        <label class="flex items-center space-x-2 cursor-pointer">
          <input type="checkbox" formControlName="subscribe" class="h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500">
          <span class="text-sm text-gray-700">Subscribe to newsletter</span>
        </label>
      </div>

      <!-- Actions -->
      <div class="mt-8 flex justify-end gap-4">
        <button type="button" (click)="onReset()"
                class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition">
          Reset
        </button>
        <button type="submit"
                class="px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:bg-primary-300"
                [disabled]="form.invalid">
          Submit
        </button>
      </div>
    </form>
  </div>
  
  <!-- Submission Status -->
  @if (submissionStatus() !== 'idle') {
    <div class="mt-6 p-4 rounded-lg"
        [class.bg-green-100]="submissionStatus() === 'success'"
        [class.text-green-800]="submissionStatus() === 'success'"
        [class.bg-red-100]="submissionStatus() === 'error'"
        [class.text-red-800]="submissionStatus() === 'error'">
        @if (submissionStatus() === 'success') {
          <p><strong>Success!</strong> Form submitted successfully.</p>
        } @else {
          <p><strong>Error!</strong> Please correct the errors and try again.</p>
        }
    </div>
  }

  <!-- Live Data Preview -->
  <div class="mt-8 bg-gray-800 text-white p-6 rounded-2xl shadow-lg">
    <h3 class="text-xl font-semibold mb-4 border-b border-gray-600 pb-2">Live Form Data Preview</h3>
    <pre class="text-sm whitespace-pre-wrap">{{ formDataPreview() | json }}</pre>
  </div>
</div>